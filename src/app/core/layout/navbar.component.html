<nav class="navbar" role="navigation" aria-label="Main navigation">
  <div class="container navbar-card card navbar-content">
    <a class="navbar-brand" routerLink="/">Drafts</a>
    <button
      id="nav-toggle"
      class="navbar-toggle btn"
      (click)="toggleMobileMenu()"
      aria-label="Toggle menu"
      aria-haspopup="true"
      [attr.aria-expanded]="isMobileMenuOpen"
      >
      @if (!isMobileMenuOpen) {
        <span>☰</span>
      } @else {
        <span>✕</span>
      }
    </button>

    <ul id="nav-menu" class="navbar-links" [class.open]="isMobileMenuOpen" role="menu" [attr.aria-labelledby]="'nav-toggle'">
      <li role="none"><a role="menuitem" routerLink="/articles" (click)="onNavLinkClick($event)">Articles</a></li>
      @if (auth.isAuthenticated()) {
        <li role="none">
          <a role="menuitem" routerLink="/notifications" class="notif-link" (click)="onNavLinkClick($event)">
            Notifications
            @if (notifications.unreadCount() > 0) {
              <span class="notif-badge">
                {{ notifications.unreadCount() }}
              </span>
            }
          </a>
        </li>
      }
      <li class="auth-item" role="none">
        @if (!auth.isAuthenticated()) {
          <a role="menuitem" routerLink="/auth/signin" class="btn sign-in" (click)="onNavLinkClick($event)">Sign in</a>
        } @else {
          <div class="auth-user">
            <a class="user-chip" routerLink="/profile" role="menuitem" aria-label="Go to profile" (click)="onNavLinkClick($event)">
              <span class="avatar" aria-hidden="true">{{ auth.userName().slice(0, 1) }}</span>
              <span class="auth-username">{{ auth.userName() }}</span>
            </a>
            <button class="btn sign-out" (click)="signOut(); isMobileMenuOpen && toggleMobileMenu()">Sign out</button>
          </div>
        }
      </li>
    </ul>
  </div>
</nav>
