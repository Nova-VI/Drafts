<nav class="navbar" role="navigation" aria-label="Main navigation">
  <div class="container navbar-card card navbar-content">
    <a class="navbar-brand" routerLink="/">Drafts</a>
    <button
      id="nav-toggle"
      class="navbar-toggle btn"
      (click)="toggleMobileMenu()"
      aria-label="Toggle menu"
      aria-haspopup="true"
      [attr.aria-expanded]="isMobileMenuOpen"
      >
      <span *ngIf="!isMobileMenuOpen">☰</span>
      <span *ngIf="isMobileMenuOpen">✕</span>
    </button>

    <ul id="nav-menu" class="navbar-links" [class.open]="isMobileMenuOpen" role="menu" [attr.aria-labelledby]="'nav-toggle'">
      <li role="none"><a role="menuitem" routerLink="/articles" (click)="onNavLinkClick($event)">Articles</a></li>
      <li role="none" *ngIf="auth.isAuthenticated()">
        <a role="menuitem" routerLink="/notifications" class="notif-link" (click)="onNavLinkClick($event)">
          Notifications
          <span class="notif-badge" *ngIf="notifications.unreadCount() > 0">
            {{ notifications.unreadCount() }}
          </span>
        </a>
      </li>
      <li role="none"><a role="menuitem" routerLink="/profile" (click)="onNavLinkClick($event)">Profile</a></li>
      <li class="auth-item" role="none">
        <a *ngIf="!auth.isAuthenticated()" role="menuitem" routerLink="/auth/signin" class="btn sign-in" (click)="onNavLinkClick($event)">Sign in</a>
        <div *ngIf="auth.isAuthenticated()" class="auth-user">
          <span class="auth-username">{{ auth.userName() }}</span>
          <button class="btn sign-out" (click)="signOut(); isMobileMenuOpen && toggleMobileMenu()">Sign out</button>
        </div>
      </li>
    </ul>
  </div>
</nav>
