<section class="search-page container">
  <div class="search-header">
    <app-search-box (query)="onQuery($event)" (suggestSelected)="onSuggest($event)"></app-search-box>

    <form class="filters" (submit)="applyFilters(); $event.preventDefault();">
      <label>Author
        <input name="author" [(ngModel)]="filtersObj.author" />
      </label>
      <label>Tags
        <input name="tags" placeholder="comma separated" [(ngModel)]="filtersObj.tags" />
      </label>
      <label>Since
        <input type="date" name="since" [(ngModel)]="filtersObj.since" />
      </label>

      <div class="field-selection">
        <span>Search in:</span>
        <label><input type="checkbox" [checked]="filtersObj.fields.includes('title')" (change)="toggleField('title',$any($event.target).checked)" /> Title</label>
        <label><input type="checkbox" [checked]="filtersObj.fields.includes('excerpt')" (change)="toggleField('excerpt',$any($event.target).checked)" /> Excerpt</label>
        <label><input type="checkbox" [checked]="filtersObj.fields.includes('author')" (change)="toggleField('author',$any($event.target).checked)" /> Author</label>
        <label><input type="checkbox" [checked]="filtersObj.fields.includes('tags')" (change)="toggleField('tags',$any($event.target).checked)" /> Tags</label>
      </div>

      <button class="btn" type="submit">Apply</button>
    </form>
  </div>

  <div class="search-stats">Results: {{ total() }}</div>
  <app-search-results [results]="results()"></app-search-results>
</section>
